services:
  unmonitarr:
    image: ghcr.io/unmonitarr/unmonitarr:latest
    container_name: unmonitarr
    ports:
      - "5099:5099"  # Webhook server port
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:5099/health || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    environment:
      # --- Global settings ---
      - TZ=Australia/Melbourne           # Container timezone
      - PUID=${DOCKER_PUID}              # User ID for running container process
      - PGID=${DOCKER_PGID}              # Group ID for running container process
      - LOG_LEVEL=INFO                   # Logging verbosity (DEBUG, INFO, WARNING, ERROR)
      - SLEEP_MINUTES=30                 # Minutes to wait between unmonitor runs
      - DELAY_MINUTES=60                 # Minutes to wait before unmonitoring new items
      - AUTO_TAG_NAME=auto-unmonitored   # Tag to assign to auto-unmonitored items
      - IGNORE_TAG_NAME=ignore           # Tag to ignore from unmonitoring
      - SKIP_IF_FILE=1                   # Skip if file already exists (1=enabled, 0=disabled)
      - DRY_RUN=1                        # Run in dry-run mode (no changes made; 1=enabled, 0=disabled)

      # --- Radarr settings ---
      - ENABLE_RADARR=1                  # Enable Radarr integration (1=enabled, 0=disabled)
      - RADARR_URL=http://localhost:7878 # Radarr instance URL
      - RADARR_API_KEY=${RADARR_API_KEY} # Radarr API key
      - PREFERRED_RELEASE=either         # Preferred release type (e.g., 'either', 'cut', 'proper')
      - IGNORE_INCINEMAS=0               # Ignore in-cinemas movies (1=enabled, 0=disabled)

      # --- Sonarr settings ---
      - ENABLE_SONARR=1                  # Enable Sonarr integration (1=enabled, 0=disabled)
      - SONARR_URL=http://localhost:8989 # Sonarr instance URL
      - SONARR_API_KEY=${SONARR_API_KEY} # Sonarr API key
      - SEASON_PACK_MODE=0               # Enable season pack mode (1=enabled, 0=disabled)
      - SEASON_PACK_MODE_TAG=season-pack # Tag for series using season pack mode

      # --- Re-monitoring Time Windows ---
      - RADARR_REMONITOR_WINDOW_DAYS=30  # Only re-monitor movies released within X days (0=disabled)
      - SONARR_REMONITOR_WINDOW_DAYS=14  # Only re-monitor episodes aired within X days (0=disabled)
    restart: unless-stopped